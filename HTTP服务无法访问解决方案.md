# HTTP服务无法访问 - 快速解决方案

## 问题现象
- ✅ Docker容器运行正常
- ✅ 端口3000和8080正常监听
- ❌ 通过浏览器无法访问游戏
- ❌ curl测试HTTP服务失败

## 🚀 一键解决方案

### 方案1：运行网站配置向导（推荐）
```bash
# 在服务器上运行
./1panel-website-setup.sh
```
然后按照向导提示在1Panel中创建网站配置。

### 方案2：运行部署修复工具
```bash
# 全面诊断和修复
./fix-deployment.sh
```

## 🌐 1Panel网站配置步骤

### 核心解决方案
问题的根本原因是：**容器运行在内部端口，需要通过1Panel网站功能创建反向代理**

### 配置步骤
1. **登录1Panel**: http://您的服务器IP:10086
2. **创建网站**: 网站 → 网站管理 → 创建网站
3. **配置参数**:
   ```
   网站类型: 反向代理
   主域名: 您的服务器IP (如: 101.126.146.167)
   端口: 80
   代理地址: http://127.0.0.1:3000
   ```
4. **启用WebSocket支持**（重要）
5. **保存配置**

## 🔍 配置验证

配置完成后测试：
```bash
# 测试HTTP访问
curl -I http://您的服务器IP

# 测试游戏页面
curl http://您的服务器IP | grep "大炮轰小兵"

# 测试WebSocket
curl -I http://您的服务器IP/socket.io/
```

## ✅ 成功标志

配置成功后您应该看到：
- ✅ HTTP响应状态码：200 OK
- ✅ 浏览器显示"大炮轰小兵"游戏界面
- ✅ WebSocket连接正常
- ✅ 1Panel网站状态显示"运行中"

## 🎮 最终访问地址

- **游戏主页**: http://您的服务器IP
- **健康检查**: http://您的服务器IP/health
- **状态监控**: http://您的服务器IP/status.html

## 📋 故障排除

### 问题1：502 Bad Gateway
**解决方案**: 检查代理地址是否为 `http://127.0.0.1:3000`

### 问题2：网站创建失败
**解决方案**: 确保端口80未被其他服务占用，或使用其他端口

### 问题3：WebSocket连接失败
**解决方案**: 确保在高级设置中启用了WebSocket支持

## 💡 重要提醒

1. **容器正常但无法访问是正常现象** - 需要配置反向代理
2. **健康检查失败不影响使用** - 外部访问正常即可
3. **防火墙端口必须开放** - 80、3000、8080端口
4. **1Panel网站配置是必需的** - 不是可选步骤

---

**需要详细说明？** 查看：[`1Panel网站配置指南.md`](./1Panel网站配置指南.md)
**遇到其他问题？** 运行：`./fix-deployment.sh` 